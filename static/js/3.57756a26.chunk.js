(this.webpackJsonppoc=this.webpackJsonppoc||[]).push([[3],{66:function(e,t,r){"use strict";r.r(t);var n=r(1),c=r.n(n),s=r(9),i=r(7),a=r(2),o=r(30);var u=r(16),l=r(36),d=r(44),j=r(26),h=r(19),b=r(3),O=r(8),f=r(20),x=r(13),v=r(24),p=function(e){function t(t,r){var n;return(n=e.call(this)||this).client=t,n.options=r,n.trackedProps=[],n.bindMethods(),n.setOptions(r),n}Object(O.a)(t,e);var r=t.prototype;return r.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},r.onSubscribe=function(){1===this.listeners.length&&(this.currentQuery.addObserver(this),m(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())},r.onUnsubscribe=function(){this.listeners.length||this.destroy()},r.shouldFetchOnReconnect=function(){return e=this.currentQuery,!1!==(t=this.options).enabled&&("always"===t.refetchOnReconnect||!1!==t.refetchOnReconnect&&y(e,t));var e,t},r.shouldFetchOnWindowFocus=function(){return e=this.currentQuery,!1!==(t=this.options).enabled&&("always"===t.refetchOnWindowFocus||!1!==t.refetchOnWindowFocus&&y(e,t));var e,t},r.destroy=function(){this.listeners=[],this.clearTimers(),this.currentQuery.removeObserver(this)},r.setOptions=function(e,t){var r=this.options,n=this.currentQuery;if(this.options=this.client.defaultQueryObserverOptions(e),"undefined"!==typeof this.options.enabled&&"boolean"!==typeof this.options.enabled)throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=r.queryKey),this.updateQuery();var c=this.hasListeners();c&&g(this.currentQuery,n,this.options,r)&&this.executeFetch(),this.updateResult(t),!c||this.currentQuery===n&&this.options.enabled===r.enabled&&this.options.staleTime===r.staleTime||this.updateStaleTimeout(),!c||this.currentQuery===n&&this.options.enabled===r.enabled&&this.options.refetchInterval===r.refetchInterval||this.updateRefetchInterval()},r.getOptimisticResult=function(e){var t=this.client.defaultQueryObserverOptions(e),r=this.client.getQueryCache().build(this.client,t);return this.createResult(r,t)},r.getCurrentResult=function(){return this.currentResult},r.trackResult=function(e){var t=this,r={};return Object.keys(e).forEach((function(n){Object.defineProperty(r,n,{configurable:!1,enumerable:!0,get:function(){var r=n;return t.trackedProps.includes(r)||t.trackedProps.push(r),e[r]}})})),r},r.getNextResult=function(e){var t=this;return new Promise((function(r,n){var c=t.subscribe((function(t){t.isFetching||(c(),t.isError&&(null==e?void 0:e.throwOnError)?n(t.error):r(t))}))}))},r.getCurrentQuery=function(){return this.currentQuery},r.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},r.refetch=function(e){return this.fetch(e)},r.fetchOptimistic=function(e){var t=this,r=this.client.defaultQueryObserverOptions(e),n=this.client.getQueryCache().build(this.client,r);return n.fetch().then((function(){return t.createResult(n,r)}))},r.fetch=function(e){var t=this;return this.executeFetch(e).then((function(){return t.updateResult(),t.currentResult}))},r.executeFetch=function(e){this.updateQuery();var t=this.currentQuery.fetch(this.options,e);return(null==e?void 0:e.throwOnError)||(t=t.catch(a.h)),t},r.updateStaleTimeout=function(){var e=this;if(this.clearStaleTimeout(),!a.e&&!this.currentResult.isStale&&Object(a.f)(this.options.staleTime)){var t=Object(a.q)(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout((function(){e.currentResult.isStale||e.updateResult()}),t)}},r.updateRefetchInterval=function(){var e=this;this.clearRefetchInterval(),!a.e&&!1!==this.options.enabled&&Object(a.f)(this.options.refetchInterval)&&(this.refetchIntervalId=setInterval((function(){(e.options.refetchIntervalInBackground||f.a.isFocused())&&e.executeFetch()}),this.options.refetchInterval))},r.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval()},r.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},r.clearStaleTimeout=function(){clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0},r.clearRefetchInterval=function(){clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0},r.createResult=function(e,t){var r,n,c=this.currentQuery,s=this.options,i=this.currentResult,o=this.currentResultState,u=this.currentResultOptions,l=e!==c,d=l?e.state:this.currentQueryInitialState,j=l?this.currentResult:this.previousQueryResult,h=e.state,b=h.dataUpdatedAt,O=h.error,f=h.errorUpdatedAt,x=h.isFetching,p=h.status,w=!1,T=!1;if(t.optimisticResults){var k=this.hasListeners(),C=!k&&m(e,t),S=k&&g(e,c,t,s);(C||S)&&(x=!0,b||(p="loading"))}if(t.keepPreviousData&&!h.dataUpdateCount&&(null==j?void 0:j.isSuccess)&&"error"!==p)r=j.data,b=j.dataUpdatedAt,p=j.status,w=!0;else if(t.select&&"undefined"!==typeof h.data)if(i&&h.data===(null==o?void 0:o.data)&&t.select===(null==u?void 0:u.select))r=i.data;else try{r=t.select(h.data),!1!==t.structuralSharing&&(r=Object(a.m)(null==i?void 0:i.data,r))}catch(N){Object(v.a)().error(N),O=N,f=Date.now(),p="error"}else r=h.data;"undefined"!==typeof t.placeholderData&&"undefined"===typeof r&&"loading"===p&&("undefined"!==typeof(n=(null==i?void 0:i.isPlaceholderData)&&t.placeholderData===(null==u?void 0:u.placeholderData)?i.data:"function"===typeof t.placeholderData?t.placeholderData():t.placeholderData)&&(p="success",r=n,T=!0));return{status:p,isLoading:"loading"===p,isSuccess:"success"===p,isError:"error"===p,isIdle:"idle"===p,data:r,dataUpdatedAt:b,error:O,errorUpdatedAt:f,failureCount:h.fetchFailureCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>d.dataUpdateCount||h.errorUpdateCount>d.errorUpdateCount,isFetching:x,isLoadingError:"error"===p&&0===h.dataUpdatedAt,isPlaceholderData:T,isPreviousData:w,isRefetchError:"error"===p&&0!==h.dataUpdatedAt,isStale:y(e,t),refetch:this.refetch,remove:this.remove}},r.shouldNotifyListeners=function(e,t){if(!t)return!0;if(e===t)return!1;var r=this.options,n=r.notifyOnChangeProps,c=r.notifyOnChangePropsExclusions;if(!n&&!c)return!0;if("tracked"===n&&!this.trackedProps.length)return!0;var s="tracked"===n?this.trackedProps:n;return Object.keys(e).some((function(r){var n=r,i=e[n]!==t[n],a=null==s?void 0:s.some((function(e){return e===r})),o=null==c?void 0:c.some((function(e){return e===r}));return i&&!o&&(!s||a)}))},r.updateResult=function(e){var t=this.currentResult;if(this.currentResult=this.createResult(this.currentQuery,this.options),this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,!Object(a.o)(this.currentResult,t)){var r={cache:!0};!1!==(null==e?void 0:e.listeners)&&this.shouldNotifyListeners(this.currentResult,t)&&(r.listeners=!0),this.notify(Object(b.a)({},r,e))}},r.updateQuery=function(){var e=this.client.getQueryCache().build(this.client,this.options);if(e!==this.currentQuery){var t=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(null==t||t.removeObserver(this),e.addObserver(this))}},r.onQueryUpdate=function(e){var t={};"success"===e.type?t.onSuccess=!0:"error"===e.type&&(t.onError=!0),this.updateResult(t),this.hasListeners()&&this.updateTimers()},r.notify=function(e){var t=this;i.a.batch((function(){e.onSuccess?(null==t.options.onSuccess||t.options.onSuccess(t.currentResult.data),null==t.options.onSettled||t.options.onSettled(t.currentResult.data,null)):e.onError&&(null==t.options.onError||t.options.onError(t.currentResult.error),null==t.options.onSettled||t.options.onSettled(void 0,t.currentResult.error)),e.listeners&&t.listeners.forEach((function(e){e(t.currentResult)})),e.cache&&t.client.getQueryCache().notify(t.currentQuery)}))},t}(x.a);function m(e,t){return function(e,t){return!1!==t.enabled&&!e.state.dataUpdatedAt&&!("error"===e.state.status&&!1===t.retryOnMount)}(e,t)||function(e,t){return!1!==t.enabled&&e.state.dataUpdatedAt>0&&("always"===t.refetchOnMount||!1!==t.refetchOnMount&&y(e,t))}(e,t)}function g(e,t,r,n){return!1!==r.enabled&&(e!==t||!1===n.enabled)&&y(e,r)}function y(e,t){return e.isStaleByTime(t.staleTime)}function w(){var e=!1;return{clearReset:function(){e=!1},reset:function(){e=!0},isReset:function(){return e}}}var T=c.a.createContext(w());function k(e,t){var r=c.a.useRef(!1),n=c.a.useState(0)[1],s=Object(o.b)(),a=c.a.useContext(T),u=s.defaultQueryObserverOptions(e);u.optimisticResults=!0,u.onError&&(u.onError=i.a.batchCalls(u.onError)),u.onSuccess&&(u.onSuccess=i.a.batchCalls(u.onSuccess)),u.onSettled&&(u.onSettled=i.a.batchCalls(u.onSettled)),u.suspense&&"number"!==typeof u.staleTime&&(u.staleTime=1e3),(u.suspense||u.useErrorBoundary)&&(a.isReset()||(u.retryOnMount=!1));var l=c.a.useRef();l.current||(l.current=new t(s,u));var d=l.current.getOptimisticResult(u);if(c.a.useEffect((function(){r.current=!0,a.clearReset();var e=l.current.subscribe(i.a.batchCalls((function(){r.current&&n((function(e){return e+1}))})));return l.current.updateResult(),function(){r.current=!1,e()}}),[a]),c.a.useEffect((function(){l.current.setOptions(u,{listeners:!1})}),[u]),u.suspense&&d.isLoading)throw l.current.fetchOptimistic(u).then((function(e){var t=e.data;null==u.onSuccess||u.onSuccess(t),null==u.onSettled||u.onSettled(t,null)})).catch((function(e){a.clearReset(),null==u.onError||u.onError(e),null==u.onSettled||u.onSettled(void 0,e)}));if((u.suspense||u.useErrorBoundary)&&d.isError)throw d.error;return"tracked"===u.notifyOnChangeProps&&(d=l.current.trackResult(d)),d}function C(e,t,r){return k(Object(a.k)(e,t,r),p)}var S=function(){return C("projects",j.j,{})},N=function(){var e=Object(h.b)().user.user.uid;return C(["users",e],(function(){return Object(j.m)(e)}),{refetchOnWindowFocus:!1})},I=function(e){var t=Object(o.b)();return C(["users",e],(function(){return Object(j.m)(e)}),{initialData:function(){var r;return null===(r=t.getQueryData("users"))||void 0===r?void 0:r.find((function(t){return t.uid===e}))}})},R=function(){return C("users",j.n)},Q=r(6),L=function(e){var t=e.value,r=e.type,n=e.onChange,c=e.label,s=e.name,i=e.readOnly,a=e.placeholder;return Object(Q.jsxs)("div",{className:"flex flex-col w-full my-1",children:[Object(Q.jsxs)("label",{htmlFor:s||c,className:"p-2  text-yellow-900",children:[c,":"]}),Object(Q.jsx)("input",{className:"border-gray-100 border-2 p-2 rounded w-72 ".concat(i?"text-gray-400":"focus:border-yellow-300 "," outline-none w-full"),value:t,type:r||"text",onChange:n,name:s||c,readOnly:i,placeholder:a})]})},E=function(e){var t=e.children,r=e.value,n=e.onChange,c=e.label,s=e.disabled;return Object(Q.jsxs)("div",{className:"flex justify-center flex-col w-full my-1",children:[Object(Q.jsxs)("label",{className:"p-2  text-yellow-900",children:[c,":"]}),Object(Q.jsx)("select",{value:r,onChange:n,className:"border-gray-100 border-2 p-2 rounded w-56 ".concat(s?null:"focus:border-yellow-300","  outline-none w-full"),disabled:s,children:t})]})},U=function(e){var t=e.value,r=e.text;return Object(Q.jsx)("option",{value:t,className:"hover:bg-yellow-500 hover:text-white",children:r})},F=r(34),A=function(e){var t=e.children,r=e.isOpen,n=e.closeModal;return Object(Q.jsxs)("div",{className:"py-6 px-10 shadow rounded border-2 border-yellow-500 fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 scale  ".concat(r?"opacity-100":"opacity-0"," ").concat(r?"scale-100":"scale-0"," z-50 bg-white ml-24 max-h-96 overflow-auto  flex flex-col items-center"),children:[Object(Q.jsx)("span",{className:"absolute top-2 right-4 text-yellow-900 hover:text-yellow-500 cursor-pointer",onClick:n,children:"x"}),t]})},P=function(e){var t=e.value,r=e.onChange,n=e.label,c=e.name,s=e.placeholder,i=e.disabled;return Object(Q.jsxs)("div",{className:"flex justify-center flex-col  my-1",children:[n?Object(Q.jsx)("label",{htmlFor:c||n,className:"p-2  text-yellow-900",children:n}):null,Object(Q.jsx)("textarea",{className:"border-gray-100 border-2 p-2 rounded w-96 h-52 ".concat(i?null:"focus:border-yellow-300","  outline-none"),value:t,onChange:r,name:c||n,placeholder:s,disabled:i})]})},D=["Frontend","Backend","FullStack"],M=["Critical","High","Normal","Low","Informational"],z=r(23),W=r(37),B=function(e){var t=e.isLoading,r=e.error,n=e.errorText,c=e.children;return Object(Q.jsx)(Q.Fragment,{children:t?Object(Q.jsx)("div",{className:"flex justify-center",children:Object(Q.jsx)(z.a,{})}):r?Object(Q.jsx)(W.a,{type:"error",children:n}):c})},q=function(){var e=S(),t=R(),r=function(){var e=Object(o.b)(),t=Object(h.b)().user.user.uid;return Object(d.a)((function(e){return Object(j.c)(Object(l.a)(Object(l.a)({},e),{},{creatorUid:t}))}),{onSuccess:function(t){e.invalidateQueries(["tasks",t]),e.invalidateQueries("tasks")}})}(),c=Object(n.useState)("Test"),s=Object(u.a)(c,2),i=s[0],a=s[1],b=Object(n.useState)("Test"),O=Object(u.a)(b,2),f=O[0],x=O[1],v=Object(n.useState)(""),p=Object(u.a)(v,2),m=p[0],g=p[1],y=Object(n.useState)(""),w=Object(u.a)(y,2),T=w[0],k=w[1],C=Object(n.useState)(""),N=Object(u.a)(C,2),I=N[0],D=N[1],z=Object(n.useState)(!1),W=Object(u.a)(z,2),q=W[0],Y=W[1];return Object(n.useEffect)((function(){r.isSuccess&&setTimeout((function(){return Y(!1)}),200)}),[r.isSuccess]),Object(Q.jsxs)("div",{className:"p-2",children:[Object(Q.jsx)(F.a,{text:"Add Task",onClick:function(){return Y(!0)},size:"small"}),Object(Q.jsxs)(A,{isOpen:q,closeModal:function(){return Y(!1)},children:[Object(Q.jsx)("h2",{className:"p-2  text-yellow-900 text-center",children:"New Task"}),Object(Q.jsx)(L,{label:"Name",value:i,onChange:function(e){return a(e.currentTarget.value)}}),Object(Q.jsx)(P,{label:"Description",value:f,onChange:function(e){return x(e.currentTarget.value)},cols:30}),Object(Q.jsx)(B,{isLoading:e.isLoading,error:e.error,errorText:"There was an error getting the projects.",children:e.data?Object(Q.jsxs)(E,{label:"Project",value:m,onChange:function(e){return g(e.target.value)},children:[Object(Q.jsx)(U,{value:""}),e.data.map((function(e){return Object(Q.jsx)(U,{value:e.id,text:e.name},e.id)}))]}):null}),Object(Q.jsx)(B,{isLoading:t.isLoading,error:t.error,errorText:"There was an error getting the users.",children:t.data?Object(Q.jsxs)(E,{label:"Owner",value:T,onChange:function(e){return k(e.target.value)},children:[Object(Q.jsx)(U,{value:""}),t.data.map((function(e){return Object(Q.jsx)(U,{value:e.uid,text:e.name},e.uid)}))]}):null}),Object(Q.jsxs)(E,{label:"Severity",value:I,onChange:function(e){return D(e.target.value)},children:[Object(Q.jsx)(U,{value:""}),M.map((function(e){return Object(Q.jsx)(U,{value:e,text:e},e)}))]}),Object(Q.jsx)("div",{className:"my-4 flex justify-center",children:Object(Q.jsx)(B,{isLoading:r.isLoading,error:r.error,errorText:"There was an error adding the task.",children:Object(Q.jsx)(F.a,{onClick:function(){r.mutate({name:i,description:f,projectId:m,userId:T,severity:I})},text:"Add Task"})})})]})]})},Y=function(){var e=Object(n.useState)("Project #1"),t=Object(u.a)(e,2),r=t[0],c=t[1],s=Object(n.useState)("Test"),i=Object(u.a)(s,2),a=i[0],b=i[1],O=Object(n.useState)(""),f=Object(u.a)(O,2),x=f[0],v=f[1],p=Object(n.useState)(!1),m=Object(u.a)(p,2),g=m[0],y=m[1],w=function(){var e=Object(o.b)(),t=Object(h.b)().user.user.uid;return Object(d.a)((function(e){return Object(j.b)(Object(l.a)(Object(l.a)({},e),{},{ownerUid:t}))}),{onSuccess:function(){e.invalidateQueries("projects")}})}();return Object(n.useEffect)((function(){w.isSuccess&&setTimeout((function(){return y(!1)}),200)}),[w.isSuccess]),Object(Q.jsxs)("div",{className:"p-2",children:[Object(Q.jsx)(F.a,{text:"Add Project",onClick:function(){return y(!0)},size:"small"}),Object(Q.jsxs)(A,{isOpen:g,closeModal:function(){return y(!1)},children:[Object(Q.jsx)("h2",{className:"p-2  text-yellow-900 text-center",children:"New Project"}),Object(Q.jsx)(L,{label:"Name",value:r,onChange:function(e){return c(e.currentTarget.value)}}),Object(Q.jsx)(P,{label:"Description:",value:a,onChange:function(e){return b(e.currentTarget.value)},cols:30}),Object(Q.jsxs)(E,{label:"Category",value:x,onChange:function(e){return v(e.target.value)},children:[Object(Q.jsx)(U,{value:""}),D.map((function(e){return Object(Q.jsx)(U,{value:e,text:e},e)}))]}),Object(Q.jsx)("div",{className:"my-4 flex justify-center",children:Object(Q.jsx)(B,{isLoading:w.isLoading,error:w.error,errorText:"There ware an error updating the project.",children:Object(Q.jsx)(F.a,{onClick:function(){w.mutate({name:r,description:a,category:x})},text:"Add Project"})})})]})]})},K=r(35),H=function(e){var t=e.to,r=e.text,n=e.exact;return Object(Q.jsx)("li",{className:"py-2 border-b-2 border-transparent ",children:Object(Q.jsx)(K.c,{exact:n,to:t,className:"py-2 px-4 border-l-2 border-transparent text-white ",activeClassName:"border-l-2 border-white",children:r})})},J=function(e){var t=e.userId;return Object(Q.jsxs)("ul",{children:[Object(Q.jsx)(H,{to:"/account",text:"Account"}),Object(Q.jsx)(H,{to:"/projects",text:"Projects"}),Object(Q.jsx)(H,{to:"/tasks",text:"Tasks"}),Object(Q.jsx)(H,{to:"/user/".concat(t),text:"Your Work"})]})},G=function(){var e=N().data,t=Object(h.b)().logout;return Object(Q.jsxs)("div",{className:"bg-yellow-500 px-4 py-6 fixed top-0 left-0 h-full shadow",children:[Object(Q.jsx)(J,{userId:null===e||void 0===e?void 0:e.uid}),Object(Q.jsxs)("div",{className:"bg-white rounded mt-8 w-36 flex flex-col items-center",children:[Object(Q.jsx)("p",{className:"text-yellow-900 text-center",children:"Actions:"}),Object(Q.jsx)(q,{}),"TL"===(null===e||void 0===e?void 0:e.role)?Object(Q.jsx)(Y,{}):null]}),Object(Q.jsx)("button",{className:"text-white px-5 mt-4",onClick:t,children:"Logout"})]})},V=r(38),X=function(e){var t=e.title;return Object(Q.jsx)("h1",{className:"text-2xl bg-yellow-500 text-white text-center p-4",children:t})},Z=function(e){var t=e.pageTitle,r=e.children,n=N().data;return Object(Q.jsxs)("div",{className:" w-full ml-44",children:[Object(Q.jsx)(X,{title:t||"..."}),Object(Q.jsx)("div",{className:"absolute top-2 right-2 text-white text-xl ",children:Object(Q.jsxs)("p",{children:["Hello, ",null===n||void 0===n?void 0:n.name]})}),r]})},$=function(){var e=N(),t=e.isLoading,r=e.error,c=e.data,s=Object(V.b)(),i=Object(n.useState)(""),a=Object(u.a)(i,2),o=a[0],d=a[1],j=Object(n.useState)("25"),h=Object(u.a)(j,2),b=h[0],O=h[1];return Object(n.useEffect)((function(){d((null===c||void 0===c?void 0:c.name)||""),O((null===c||void 0===c?void 0:c.age)||"28")}),[c]),Object(Q.jsx)(Z,{pageTitle:"Your Account",children:Object(Q.jsx)("div",{className:"flex flex-col justify-center items-center w-96 mx-auto mt-12",children:Object(Q.jsx)(B,{isLoading:t,error:r,errorText:"There was an error fetching the user data.",children:c?Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(L,{value:c.email,readOnly:!0,label:"Email"}),Object(Q.jsx)(L,{value:c.role,readOnly:!0,label:"Role"}),Object(Q.jsx)(L,{label:"Name",value:o,onChange:function(e){return d(e.currentTarget.value)},placeholder:"name"}),Object(Q.jsx)(L,{label:"Age",type:"number",value:b,onChange:function(e){return O(e.currentTarget.value)}}),Object(Q.jsx)("div",{className:"mt-6",children:Object(Q.jsx)(B,{isLoading:s.isLoading,error:s.error,errorText:"There was an error updating the user data.",children:Object(Q.jsx)(F.a,{text:"Update",onClick:function(){s.mutate(Object(l.a)(Object(l.a)({},c),{},{name:o,age:b}))}})})})]}):null})})})},_=function(){return C("tasks",j.l)},ee=function(){var e=Object(o.b)();return[function(t){e.prefetchQuery(["tasks",t],(function(){return Object(j.k)(t)}),{staleTime:3e4})}]},te=function(e){return Object(Q.jsx)(K.b,Object(l.a)(Object(l.a)({},e),{},{className:"text-yellow-500 underline ".concat(e.className),children:e.children}))},re=function(e){var t=e.children;return Object(Q.jsx)("table",{className:"max-w-screen-xl mx-auto my-4 rounded shadow",children:t})},ne=function(e){var t=e.children;e.numberOfCols;return Object(Q.jsx)("tr",{className:" grid grid-cols-4  border-b-2 border-gray-100",children:t})},ce=function(e){var t=e.children;return Object(Q.jsx)("thead",{className:"text-center font-bold py-2 px-4 border-r-2 border-gray-50",children:t})},se=function(e){var t=e.children,r=e.numberOfCols,n="grid-cols-".concat(r);return Object(Q.jsx)("tbody",{className:" grid  ".concat(n," border-b-2 border-gray-100"),children:t})},ie=function(e){var t=e.children;return Object(Q.jsx)("tr",{className:"py-2 px-4 border-r-2 border-gray-50",children:t})},ae=function(e){var t=e.project,r=t.id,n=t.name,c=t.category,s=t.ownerUid,i=I(s),a=function(){var e=Object(o.b)();return[function(t){e.prefetchQuery(["project tasks",t],(function(){return Object(j.i)(t)}),{staleTime:3e4})}]}(),l=Object(u.a)(a,1)[0];return Object(Q.jsxs)(se,{numberOfCols:3,children:[Object(Q.jsx)(ie,{children:Object(Q.jsx)(te,{to:"/projects/".concat(r),onMouseEnter:function(){return l(r)},children:n})}),Object(Q.jsx)(ie,{children:i.isLoading?"...":Object(Q.jsx)(te,{to:"/user/".concat(i.data.uid),children:i.data.name})}),Object(Q.jsx)(ie,{children:c})]})},oe=function(){var e=S(),t=e.data,r=e.isLoading,n=e.error;return Object(Q.jsx)(Z,{pageTitle:"All Projects",children:Object(Q.jsx)(B,{isLoading:r,errorText:"There was an error fetching the projects.",error:n,children:Object(Q.jsxs)(re,{children:[Object(Q.jsxs)(ne,{numberOfCols:3,children:[Object(Q.jsx)(ce,{children:"Name"}),Object(Q.jsx)(ce,{children:"Owner"}),Object(Q.jsx)(ce,{children:"Category"})]}),null===t||void 0===t?void 0:t.map((function(e){return Object(Q.jsx)(ae,{project:e},e.id)}))]})})})},ue=function(e){var t=function(e){return C(["project tasks",e],(function(){return Object(j.i)(e)}))}(e.projectId),r=t.isLoading,n=t.data,c=t.error,s=R(),i=ee(),a=Object(u.a)(i,1)[0];return Object(Q.jsx)("div",{className:"bg-white",children:Object(Q.jsx)(B,{isLoading:r,error:c,errorText:"There was an error fetching the project data.",children:Object(Q.jsxs)(re,{children:[Object(Q.jsxs)(ne,{numberOfCols:4,children:[Object(Q.jsx)(ce,{children:"Task"}),Object(Q.jsx)(ce,{children:"Owner"}),Object(Q.jsx)(ce,{children:"Severity"}),Object(Q.jsx)(ce,{children:"State"})]}),null===n||void 0===n?void 0:n.map((function(e){var t,r=null===(t=s.data)||void 0===t?void 0:t.find((function(t){return t.uid===e.userId}));return Object(Q.jsxs)(se,{numberOfCols:4,children:[Object(Q.jsx)(ie,{children:Object(Q.jsx)(te,{to:"/tasks/".concat(e.id),onMouseEnter:function(){return a(e.id)},children:e.name})}),Object(Q.jsx)(ie,{children:Object(Q.jsx)(te,{to:"/user/".concat(null===r||void 0===r?void 0:r.uid),children:null===r||void 0===r?void 0:r.name})}),Object(Q.jsx)(ie,{children:e.severity}),Object(Q.jsx)(ie,{children:e.state})]},e.id)}))]})})})},le=function(e){var t=e.ownerId,r=I(t).data;return Object(Q.jsxs)("div",{className:"w-full p-2",children:[Object(Q.jsx)("p",{className:"text-yellow-900",children:"Owner:"}),Object(Q.jsx)("p",{children:Object(Q.jsx)(te,{to:"/user/".concat(null===r||void 0===r?void 0:r.uid),children:(null===r||void 0===r?void 0:r.name)||"..."})})]})},de=function(){var e,t=Object(s.h)(),r=Object(s.g)(),c=function(e){var t=Object(o.b)();return C(["project",e],(function(){return Object(j.h)(e)}),{placeholderData:function(){var r;return null===(r=t.getQueryData("projects"))||void 0===r?void 0:r.find((function(t){return t.id===e}))}})}(t.projectId),i=c.isLoading,a=c.data,h=c.error,b=function(){var e=Object(o.b)();return Object(d.a)(j.f,{onSuccess:function(t){e.invalidateQueries("projects"),e.removeQueries(["project",t]),e.removeQueries(["project tasks",t]),e.invalidateQueries("tasks")}})}(),O=function(){var e=Object(o.b)();return Object(d.a)(j.o,{onSuccess:function(t){e.setQueryData(["project",t.id],t),e.invalidateQueries("projects")}})}(),f=Object(n.useState)(""),x=Object(u.a)(f,2),v=x[0],p=x[1],m=Object(n.useState)(""),g=Object(u.a)(m,2),y=g[0],w=g[1],T=N();Object(n.useEffect)((function(){p((null===a||void 0===a?void 0:a.description)||""),w((null===a||void 0===a?void 0:a.category)||"")}),[a]);var k=(null===(e=T.data)||void 0===e?void 0:e.uid)===(null===a||void 0===a?void 0:a.ownerUid);return Object(Q.jsx)(Z,{pageTitle:null===a||void 0===a?void 0:a.name,children:Object(Q.jsx)("div",{className:"px-6 py-4 flex flex-col justify-center items-center",children:Object(Q.jsx)(B,{isLoading:i,error:h,errorText:"There was an error fetching the project data.",children:a?Object(Q.jsxs)("div",{className:"flex",children:[Object(Q.jsxs)("div",{className:"flex flex-col items-center mr-8",children:[Object(Q.jsx)(le,{ownerId:a.ownerUid}),Object(Q.jsx)(P,{value:v,onChange:function(e){return p(e.target.value)},label:"Description:",disabled:!k}),Object(Q.jsxs)(E,{label:"Category",value:y,onChange:function(e){return w(e.target.value)},disabled:!k,children:[Object(Q.jsx)(U,{value:""}),D.map((function(e){return Object(Q.jsx)(U,{value:e,text:e},e)}))]}),Object(Q.jsxs)("p",{className:"w-full text-yellow-900 px-2 py-1 mt-2",children:["Created at: ",a.createdAt]}),Object(Q.jsxs)("p",{className:"w-full text-yellow-900 px-2 py-1",children:["Last Updated: ",a.updatedAt]}),k?Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)("div",{className:"my-4",children:Object(Q.jsx)(B,{isLoading:O.isLoading,error:O.error,errorText:"There was an error updating the project data.",children:Object(Q.jsx)(F.a,{onClick:function(){O.mutate(Object(l.a)(Object(l.a)({},a),{},{description:v,category:y}))},text:"Update Project"})})}),Object(Q.jsx)("div",{className:"mb-4",children:Object(Q.jsx)(B,{isLoading:b.isLoading,error:b.error,errorText:"There was an error deleting the project.",children:Object(Q.jsx)(F.a,{type:"danger",text:"Delete Project",onClick:function(){b.mutate(a.id),r.push("/projects")}})})})]}):null]}),Object(Q.jsx)(ue,{projectId:a.id})]}):null})})})},je=function(e){var t=e.id,r=Object(n.useState)(""),c=Object(u.a)(r,2),s=c[0],i=c[1],a=function(){var e=Object(o.b)(),t=Object(h.b)().user.user.uid;return Object(d.a)((function(e){return Object(j.a)(Object(l.a)(Object(l.a)({},e),{},{uid:t}))}),{onSuccess:function(t){e.invalidateQueries(["tasks",t])}})}(),b=Object(n.useState)(!1),O=Object(u.a)(b,2),f=O[0],x=O[1];return Object(n.useEffect)((function(){a.isSuccess&&setTimeout((function(){return x(!1)}),200)}),[a.isSuccess]),Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(F.a,{text:"Add Comment",onClick:function(){return x(!0)}}),Object(Q.jsxs)(A,{isOpen:f,closeModal:function(){return x(!1)},children:[Object(Q.jsx)("h2",{className:"p-2  text-yellow-900 text-center",children:"Add a comment"}),Object(Q.jsx)(P,{value:s,onChange:function(e){return i(e.target.value)},placeholder:"Your comment..."}),Object(Q.jsx)("div",{className:"my-2 flex justify-end",children:Object(Q.jsx)(B,{isLoading:a.isLoading,error:a.error,errorText:"There was an error adding the comment.",children:Object(Q.jsx)(F.a,{onClick:function(){a.mutate({text:s,taskId:t})},size:"small",text:"Add Comment"})})})]})]})},he=function(e){var t=e.userData,r=e.comment,n=e.taskId,c=Object(h.b)().user,s=function(){var e=Object(o.b)();return Object(d.a)(j.e,{onSuccess:function(t){var r=t.taskId;e.invalidateQueries(["tasks",r])}})}();return Object(Q.jsxs)("div",{className:"flex w-96 justify-between items-center rounded shadow px-4 py-2",children:[Object(Q.jsxs)("div",{children:[Object(Q.jsx)("p",{className:"p-1 pb-0",children:Object(Q.jsx)(te,{to:"/user/".concat(null===t||void 0===t?void 0:t.uid),children:null===t||void 0===t?void 0:t.name})}),Object(Q.jsx)("p",{className:"px-1 text-sm text-gray-400",children:r.createdAt}),Object(Q.jsx)("p",{className:"p-1",children:r.text})]}),c.user.uid===r.uid?Object(Q.jsx)(B,{isLoading:s.isLoading,errorText:"There was an error deleting the task.",error:s.error,children:Object(Q.jsx)(F.a,{onClick:function(){return e=r.id,void s.mutate({commentId:e,taskId:n});var e},size:"small",type:"danger",text:"x"})}):null]})},be=function(e){var t=e.uid,r=e.text,n=I(t).data;return Object(Q.jsxs)("div",{className:"w-full p-2",children:[Object(Q.jsx)("p",{className:"text-yellow-900",children:r}),Object(Q.jsx)("p",{children:Object(Q.jsx)(te,{to:"/user/".concat(null===n||void 0===n?void 0:n.uid),children:(null===n||void 0===n?void 0:n.name)||"..."})})]})},Oe=function(){var e,t,r=Object(s.h)(),c=Object(s.g)(),i=function(e){var t=Object(o.b)();return C(["tasks",e],(function(){return Object(j.k)(e)}),{placeholderData:function(){var r;return null===(r=t.getQueryData("tasks"))||void 0===r?void 0:r.find((function(t){return t.id===e}))}})}(r.taskId),a=i.isLoading,h=i.data,b=i.error,O=N(),f=R(),x=function(){var e=Object(o.b)();return Object(d.a)(j.g,{onSuccess:function(t){var r=t.projectId,n=t.taskId;e.invalidateQueries(["project tasks",r]),e.invalidateQueries("tasks"),e.removeQueries(["tasks",n])}})}(),v=function(){var e=Object(o.b)();return Object(d.a)(j.p,{onSuccess:function(t){e.invalidateQueries(["project tasks",t.projectId]),e.invalidateQueries("tasks"),e.setQueryData(["tasks",t.id],t)}})}(),p=Object(n.useState)(""),m=Object(u.a)(p,2),g=m[0],y=m[1],w=Object(n.useState)(""),T=Object(u.a)(w,2),k=T[0],S=T[1],I=Object(n.useState)(""),L=Object(u.a)(I,2),A=L[0],D=L[1];Object(n.useEffect)((function(){y((null===h||void 0===h?void 0:h.state)||""),S((null===h||void 0===h?void 0:h.severity)||""),D((null===h||void 0===h?void 0:h.description)||"")}),[h]);var z=[];if(!a&&!b&&!f.isLoading)for(var W in h.comments)h.comments.hasOwnProperty(W)&&function(){var e,t=h.comments[W],n=null===(e=f.data)||void 0===e?void 0:e.find((function(e){return e.uid===t.uid}));z.push(Object(Q.jsx)(he,{userData:n,comment:t,taskId:r.taskId},t.id))}();var q=(null===(e=O.data)||void 0===e?void 0:e.uid)===(null===h||void 0===h?void 0:h.creatorUid)||(null===(t=O.data)||void 0===t?void 0:t.uid)===(null===h||void 0===h?void 0:h.userId);return console.log(h),Object(Q.jsx)(Z,{pageTitle:null===h||void 0===h?void 0:h.name,children:Object(Q.jsx)("div",{className:"px-6 py-4 flex flex-col justify-center items-center",children:Object(Q.jsx)(B,{isLoading:a,error:b,errorText:"There was an error getting the task data.",children:h?Object(Q.jsxs)("div",{className:"flex",children:[Object(Q.jsxs)("div",{className:"flex flex-col items-center mr-8",children:[Object(Q.jsx)(be,{text:"Owner",uid:h.userId}),Object(Q.jsx)(be,{text:"Creator",uid:h.creatorUid}),Object(Q.jsx)(P,{label:"Description:",value:A,onChange:function(e){return D(e.target.value)},disabled:!q}),Object(Q.jsxs)(E,{value:g,onChange:function(e){return y(e.target.value)},label:"State",disabled:!q,children:[Object(Q.jsx)(U,{value:""}),Object(Q.jsx)(U,{value:"Initialized",text:"Initialized"}),Object(Q.jsx)(U,{value:"In Progress",text:"In Progress"}),Object(Q.jsx)(U,{value:"Closed",text:"Closed"})]}),Object(Q.jsxs)(E,{value:k,onChange:function(e){return S(e.target.value)},label:"Severity",disabled:!q,children:[Object(Q.jsx)(U,{value:""}),M.map((function(e){return Object(Q.jsx)(U,{value:e,text:e},e)}))]}),Object(Q.jsxs)("p",{className:"w-full text-yellow-900 px-2 py-1 mt-2",children:["Created at: ",h.createdAt]}),Object(Q.jsxs)("p",{className:"w-full text-yellow-900 px-2 py-1",children:["Last Updated: ",h.updatedAt]}),q?Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)("div",{className:"my-4",children:Object(Q.jsx)(B,{isLoading:v.isLoading,errorText:"There was an error updating the task.",error:v.error,children:Object(Q.jsx)(F.a,{onClick:function(){v.mutate(Object(l.a)(Object(l.a)({},h),{},{state:g,severity:k,description:A}))},text:"Update Task"})})}),Object(Q.jsx)("div",{className:"mb-4",children:Object(Q.jsx)(B,{isLoading:x.isLoading,errorText:"There was an error deleting the task.",error:x.error,children:Object(Q.jsx)(F.a,{type:"danger",text:"Delete Task",onClick:function(){x.mutate({projectId:h.projectId,taskId:h.id}),c.push("/projects/".concat(h.projectId))}})})})]}):null]}),Object(Q.jsxs)("div",{className:"flex flex-col items-center ml-8 w-96",children:[Object(Q.jsx)("div",{className:"my-4",children:Object(Q.jsx)(je,{id:h.id})}),Object(Q.jsx)("h2",{className:"p-2  text-yellow-900",children:"Comments:"}),z]})]}):null})})})},fe=function(){var e=_(),t=e.isLoading,r=e.data,n=e.error,c=R(),s=S(),i=ee(),a=Object(u.a)(i,1)[0];return Object(Q.jsx)(Z,{pageTitle:"Tasks",children:Object(Q.jsx)(B,{isLoading:t,errorText:"There was an error getting the tasks",error:n,children:Object(Q.jsxs)(re,{children:[Object(Q.jsxs)(ne,{numberOfCols:5,children:[Object(Q.jsx)(ce,{children:"Project"}),Object(Q.jsx)(ce,{children:"Name"}),Object(Q.jsx)(ce,{children:"Owner"}),Object(Q.jsx)(ce,{children:"Severity"}),Object(Q.jsx)(ce,{children:"State"})]}),null===r||void 0===r?void 0:r.map((function(e){var t,r,n=null===(t=c.data)||void 0===t?void 0:t.find((function(t){return t.uid===e.userId})),i=null===(r=s.data)||void 0===r?void 0:r.find((function(t){return t.id===e.projectId}));return Object(Q.jsxs)(se,{numberOfCols:5,children:[Object(Q.jsx)(ie,{children:Object(Q.jsx)(te,{to:"/projects/".concat(null===i||void 0===i?void 0:i.id),children:null===i||void 0===i?void 0:i.name})}),Object(Q.jsx)(ie,{children:Object(Q.jsx)(te,{to:"/tasks/".concat(e.id),onMouseEnter:function(){return a(e.id)},children:e.name})}),Object(Q.jsx)(ie,{children:Object(Q.jsx)(te,{to:"/user/".concat(null===n||void 0===n?void 0:n.uid),children:null===n||void 0===n?void 0:n.name})}),Object(Q.jsx)(ie,{children:e.severity}),Object(Q.jsx)(ie,{children:e.state})]},e.id)}))]})})})},xe=function(){var e,t,r,n=Object(s.h)(),c=I(n.userId),i=_(),a=S(),o=N(),l=ee(),d=Object(u.a)(l,1)[0];return Object(Q.jsx)(Z,{pageTitle:n.userId===(null===(e=o.data)||void 0===e?void 0:e.uid)?"Your Work":(null===(t=c.data)||void 0===t?void 0:t.name)||"...",children:Object(Q.jsx)(B,{isLoading:i.isLoading,errorText:"There was an error getting the users tasks",error:i.error,children:Object(Q.jsxs)(re,{children:[Object(Q.jsxs)(ne,{numberOfCols:4,children:[Object(Q.jsx)(ce,{children:"Project"}),Object(Q.jsx)(ce,{children:"Name"}),Object(Q.jsx)(ce,{children:"Severity"}),Object(Q.jsx)(ce,{children:"State"})]}),null===(r=i.data)||void 0===r?void 0:r.map((function(e){var t,r=null===(t=a.data)||void 0===t?void 0:t.find((function(t){return t.id===e.projectId}));if(e.userId===n.userId)return Object(Q.jsxs)(se,{numberOfCols:4,children:[Object(Q.jsx)(ie,{children:Object(Q.jsx)(te,{to:"/projects/".concat(null===r||void 0===r?void 0:r.id),children:null===r||void 0===r?void 0:r.name})}),Object(Q.jsx)(ie,{children:Object(Q.jsx)(te,{to:"/tasks/".concat(e.id),onMouseEnter:function(){return d(e.id)},children:e.name})}),Object(Q.jsx)(ie,{children:e.severity}),Object(Q.jsx)(ie,{children:e.state})]})}))]})})})};t.default=function(){!function(e,t){var r=c.a.useRef(!1),n=Object(o.b)(),s=Object(a.i)(e,t)[0],u=c.a.useState(n.isFetching(s)),l=u[0],d=u[1],j=c.a.useRef(s);j.current=s;var h=c.a.useRef(l);h.current=l,c.a.useEffect((function(){r.current=!0;var e=n.getQueryCache().subscribe(i.a.batchCalls((function(){if(r.current){var e=n.isFetching(j.current);h.current!==e&&d(e)}})));return function(){r.current=!1,e()}}),[n])}();return Object(Q.jsxs)("div",{className:"font-poppins flex min-h-screen",children:[Object(Q.jsx)(G,{}),Object(Q.jsxs)(s.d,{children:[Object(Q.jsx)(s.b,{path:"/account",exact:!0,children:Object(Q.jsx)($,{})}),Object(Q.jsx)(s.b,{path:"/projects",exact:!0,children:Object(Q.jsx)(oe,{})}),Object(Q.jsx)(s.b,{path:"/tasks",exact:!0,children:Object(Q.jsx)(fe,{})}),Object(Q.jsx)(s.b,{path:"/projects/:projectId",children:Object(Q.jsx)(de,{})}),Object(Q.jsx)(s.b,{path:"/tasks/:taskId",children:Object(Q.jsx)(Oe,{})}),Object(Q.jsx)(s.b,{path:"/user/:userId",children:Object(Q.jsx)(xe,{})}),Object(Q.jsx)(s.a,{to:"/account"})]})]})}}}]);
//# sourceMappingURL=3.57756a26.chunk.js.map