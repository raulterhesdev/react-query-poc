(this.webpackJsonppoc=this.webpackJsonppoc||[]).push([[0],{10:function(e,t,n){"use strict";var r=n(31);n(50),n(52);r.a.initializeApp({apiKey:"AIzaSyBXHDaRPCxDAuR8IfVx_po4E0VP9TfdvPI",authDomain:"react-query-poc.firebaseapp.com",databaseURL:"https://react-query-poc-default-rtdb.firebaseio.com",projectId:"react-query-poc",storageBucket:"react-query-poc.appspot.com",messagingSenderId:"635095643744",appId:"1:635095643744:web:9c7e0ba62dc323526a7505"}),t.a=r.a},19:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return l}));var r=n(36),c=n(16),a=n(1),o=n.n(a),u=n(10),i=n(6),s=o.a.createContext();s.displayName="AuthContext";var d=function(e){var t=Object(a.useState)(null),n=Object(c.a)(t,2),o=n[0],d=n[1],l=Object(a.useState)(null),f=Object(c.a)(l,2),b=f[0],j=f[1],p=Object(a.useState)(!1),h=Object(c.a)(p,2),m=h[0],v=h[1],x=Object(a.useCallback)((function(e){var t=e.email,n=e.password;v(!0),u.a.auth().createUserWithEmailAndPassword(t,n).then((function(e){d(e),v(!1)})).catch((function(e){j(e),v(!1)}))}),[d,j]),y=Object(a.useCallback)((function(e){var t=e.email,n=e.password;v(!0),u.a.auth().signInWithEmailAndPassword(t,n).then((function(e){d(e),v(!1)})).catch((function(e){j(e),v(!1)}))}),[d,j]),O=Object(a.useCallback)((function(){v(!0),u.a.auth().signOut().then((function(){d(null),v(!1)})).catch((function(e){j(e),v(!1)}))}),[d,j]),g=Object(a.useMemo)((function(){return{user:o,error:b,login:y,register:x,logout:O,isLoading:m}}),[o,b,m,y,x,O]);return Object(i.jsx)(s.Provider,Object(r.a)({value:g},e))};function l(){var e=o.a.useContext(s);if(void 0===e)throw new Error("useAuth must be used within a AuthProvider");return e}},23:function(e,t,n){"use strict";n(1);var r=n(6);t.a=function(e){var t=e.fullPage;return Object(r.jsx)("div",{className:"".concat(t?"absolute top-0 left-0 flex h-screen w-screen justify-center items-center z-50 bg-black bg-opacity-60":null),children:Object(r.jsx)("div",{className:"h-20 w-20 rounded-full border-t-2 border-yellow-500 animate-spin",children:Object(r.jsx)("div",{className:"h-16 w-16 rounded-full border-t-2 border-yellow-500 animate-spin",children:Object(r.jsx)("div",{className:"h-12 w-12 rounded-full border-t-2 border-yellow-500 animate-spin",children:Object(r.jsx)("div",{className:"h-8 w-8 rounded-full border-t-2 border-yellow-500 animate-spin",children:Object(r.jsx)("div",{className:"h-4 w-4 rounded-full border-t-2 border-yellow-500 animate-spin"})})})})})})}},26:function(e,t,n){"use strict";n.d(t,"d",(function(){return d})),n.d(t,"q",(function(){return l})),n.d(t,"m",(function(){return f})),n.d(t,"n",(function(){return b})),n.d(t,"b",(function(){return j})),n.d(t,"j",(function(){return p})),n.d(t,"h",(function(){return h})),n.d(t,"f",(function(){return m})),n.d(t,"o",(function(){return v})),n.d(t,"c",(function(){return x})),n.d(t,"i",(function(){return y})),n.d(t,"l",(function(){return O})),n.d(t,"k",(function(){return g})),n.d(t,"g",(function(){return w})),n.d(t,"p",(function(){return k})),n.d(t,"a",(function(){return I})),n.d(t,"e",(function(){return P}));var r=n(10),c=n(41),a=n.n(c),o=function(e){return r.a.database().ref().update(e).catch((function(e){return Promise.reject(e)}))},u=function(e){return r.a.database().ref(e).once("value").then((function(e){return e.val()})).catch((function(e){return Promise.reject(e)}))},i=function(e){return r.a.database().ref(e).once("value").then((function(e){var t=[];for(var n in e.val())if(e.val().hasOwnProperty(n)){var r=e.val()[n];t.push(r)}return t})).catch((function(e){return Promise.reject(e)}))},s=function(){return a()().format("MMMM Do YYYY")},d=function(e){var t=e.uid,n={uid:t,email:e.email,role:"TM"},r={};return r["/users/"+t]=n,o(r)},l=function(e){var t=e.uid,n={uid:t,email:e.email,role:e.role,name:e.name,age:e.age},r={};return r["/users/"+t]=n,o(r).then((function(){return n}))},f=function(e){return u("/users/".concat(e))},b=function(){return i("/users")},j=function(e){var t=e.name,n=e.description,c=e.ownerUid,a=e.category,u=s(),i={name:t,ownerUid:c,category:a},d={name:t,description:n,ownerUid:c,createdAt:u,updatedAt:u,category:a},l=r.a.database().ref().child("projects").push().key;i.id=d.id=l;var f={};return f["/projects/"+l]=i,f["/project/"+l]=d,o(f)},p=function(){return i("/projects")},h=function(e){return u("/project/".concat(e))},m=function(e){var t={};return t["/projects/"+e]=null,t["/project/"+e]=null,t["/tasks/"+e]=null,o(t).then((function(){return e})).catch((function(e){return Promise.reject(e)}))},v=function(e){var t=e.name,n=e.description,r=e.ownerUid,c=e.category,a=e.id,u={id:a,name:t,ownerUid:r,category:c},i={description:n,id:a,name:t,ownerUid:r,category:c,createdAt:e.createdAt,updatedAt:s()},d={};return d["/projects/"+a]=u,d["/project/"+a]=i,o(d).then((function(){return i}))},x=function(e){var t=e.creatorUid,n=e.description,c=e.name,a=e.projectId,u=e.userId,i=e.severity,d="Initialized",l=s(),f={name:c,userId:u,state:d,projectId:a,severity:i},b={creatorUid:t,description:n,name:c,projectId:a,userId:u,severity:i,createdAt:l,updatedAt:l,state:d},j=r.a.database().ref().child("projects").push().key;f.id=b.id=j;var p={};return p["/tasks/".concat(a,"/").concat(j)]=f,p["/task/".concat(j)]=b,o(p).then((function(){return a}))},y=function(e){return i("/tasks/".concat(e))},O=function(){return e="/tasks",r.a.database().ref(e).once("value").then((function(e){var t=[];for(var n in e.val())if(e.val().hasOwnProperty(n)){var r=e.val()[n];for(var c in r)if(r.hasOwnProperty(c)){var a=r[c];t.push(a)}}return t})).catch((function(e){return Promise.reject(e)}));var e},g=function(e){return u("/task/".concat(e))},w=function(e){var t=e.projectId,n=e.taskId,r={};return r["/tasks/".concat(t,"/").concat(n)]={},r["/task/".concat(n)]={},o(r).then((function(){return{projectId:t,taskId:n}})).catch((function(e){return Promise.reject(e)}))},k=function(e){var t=e.id,n=e.creatorUid,r=e.description,c=e.name,a=e.projectId,u=e.userId,i=e.severity,d=e.createdAt,l=e.state,f=e.comments,b={id:t,name:c,userId:u,state:l,projectId:a,severity:i},j={id:t,creatorUid:n,description:r,name:c,projectId:a,userId:u,severity:i,state:l,createdAt:d,updatedAt:s(),comments:f||[]},p={};return p["/tasks/".concat(a,"/").concat(t)]=b,p["/task/".concat(t)]=j,o(p).then((function(){return j}))},I=function(e){var t=e.text,n=e.taskId,c=e.uid,a=s(),u={text:t,taskId:n,createdAt:a,uid:c},i=r.a.database().ref().child("projects").push().key;u.id=i;var d={};return d["/task/".concat(n,"/comments/").concat(i)]=u,o(d).then((function(){return n}))},P=function(e){var t=e.taskId,n=e.commentId,r={};return r["/task/".concat(t,"/comments/").concat(n)]={},o(r).then((function(){return{taskId:t}})).catch((function(e){return Promise.reject(e)}))}},34:function(e,t,n){"use strict";n(1);var r=n(6);t.a=function(e){var t=e.onClick,n=e.type,c=e.text,a="danger"===n?"bg-red-500":"bg-yellow-500",o="danger"===n?"bg-red-600":"bg-yellow-600",u="small"===e.size?"py-1 px-3":"py-2 px-8 w-56";return Object(r.jsx)("button",{className:" ".concat(u," rounded ").concat(a," hover:").concat(o," shadow hover:shadow-none focus:outline-none text-white "),onClick:t,children:c})}},37:function(e,t,n){"use strict";n(1);var r=n(6);t.a=function(e){var t=e.text,n=e.type,c="".concat("text-center text-sm p-2 border-2 rounded absolute right-4 bottom-4 w-64"," ").concat("error"===n?"text-red-600 border-red-600  bg-red-200":"text-green-600 border-green-600 bg-green-200");return Object(r.jsx)("p",{className:c,children:t})}},38:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u}));var r=n(44),c=n(30),a=n(26),o=function(){return Object(r.a)(a.d)},u=function(){var e=Object(c.b)();return Object(r.a)(a.q,{onSuccess:function(t){e.setQueryData(["users",t.uid],t),e.invalidateQueries("users")}})}},58:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(40),o=n.n(a),u=n(16),i=n(19),s=n(23),d=n(6),l=function(e){var t=e.value,n=e.type,r=e.onChange,c=e.label,a=e.name;return Object(d.jsxs)("div",{className:"flex flex-col",children:[Object(d.jsxs)("label",{htmlFor:a||c,className:"py-1 px-2  text-yellow-900",children:[c,":"]}),Object(d.jsx)("input",{className:"py-2 px-4 mb-6 text-black rounded outline-none border-2 border-transparent focus:border-yellow-300 ",value:t,type:n||"text",onChange:r,name:a||c})]})},f=n(34),b=n(37),j=function(){var e=Object(i.b)(),t=e.login,n=e.register,c=e.isLoading,a=e.error,o=Object(r.useState)("test1@test.com"),j=Object(u.a)(o,2),p=j[0],h=j[1],m=Object(r.useState)("Test1234"),v=Object(u.a)(m,2),x=v[0],y=v[1],O=Object(r.useState)(!1),g=Object(u.a)(O,2),w=g[0],k=g[1];return Object(d.jsx)("div",{className:"bg-yellow-500 h-screen flex justify-center items-center font-poppins ",children:Object(d.jsxs)("div",{className:"bg-yellow-50 text-white px-8 py-6 flex flex-col content-center items-center rounded shadow w-96",children:[Object(d.jsx)(l,{value:p,type:"email",onChange:function(e){return h(e.currentTarget.value)},label:"Email",layoutVertical:!0}),Object(d.jsx)(l,{value:x,type:"password",onChange:function(e){return y(e.currentTarget.value)},label:"Password",layoutVertical:!0}),Object(d.jsx)(f.a,{onClick:function(){var e={email:p,password:x};w?n(e):t(e)},text:w?"Register":"Login"}),Object(d.jsxs)("button",{className:"text-yellow-900 hover:text-yellow-700  text-sm py-1 px-3 mt-1 focus:outline-none ",onClick:function(){return k((function(e){return!e}))},children:["Switch to ",w?"Login":"Register"]}),a?Object(d.jsx)(b.a,{text:a.message,type:"error"}):null,c?Object(d.jsx)(s.a,{fullPage:!0}):null]})})},p=n(38),h=Object(r.lazy)((function(){return n.e(3).then(n.bind(null,66))}));var m=function(){var e=Object(i.b)().user,t=Object(p.a)();return Object(r.useEffect)((function(){(null===e||void 0===e?void 0:e.additionalUserInfo.isNewUser)&&t.mutate({uid:e.user.uid,email:e.user.email})}),[e]),Object(d.jsx)(r.Suspense,{fallback:Object(d.jsx)(s.a,{fullPage:!0}),children:e?Object(d.jsx)(h,{}):Object(d.jsx)(j,{})})},v=(n(58),n(64)),x=n(30),y=n(42),O=n(35),g=new v.a;o.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsxs)(x.a,{client:g,children:[Object(d.jsx)(y.ReactQueryDevtools,{initialIsOpen:!1}),Object(d.jsx)(O.a,{children:Object(d.jsx)(i.a,{children:Object(d.jsx)(m,{})})})]})}),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.3fb0c11a.chunk.js.map